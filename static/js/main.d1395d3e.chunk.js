(this.webpackJsonpaether=this.webpackJsonpaether||[]).push([[0],{31:function(e,a,c){},32:function(e,a,c){},43:function(e,a,c){"use strict";c.r(a);var t=c(1),n=c.n(t),s=c(19),r=c.n(s),l=(c(31),c(10)),o=c(2),i=(c(32),c.p+"static/media/logo.4eb3c9aa.png"),d=c(20),b=c(21),h=c(26),j=c(25),u=c(16),p=c(11),m=c(0),x=Object(t.createContext)({isConnected:!1,bleDevice:null,data:[],errorMessage:"",connect:function(e){},disconnect:function(){},readData:function(e){},setError:function(e){}}),O=function(e){var a=e.children,c=Object(t.useState)(!1),n=Object(p.a)(c,2),s=n[0],r=n[1],l=Object(t.useState)(),o=Object(p.a)(l,2),i=o[0],d=o[1],b=Object(t.useState)([]),h=Object(p.a)(b,2),j=h[0],O=h[1],v=Object(t.useState)(""),g=Object(p.a)(v,2),f=g[0],y=g[1],N=function(e){return e>=0&&e<=16?"Good":e>16&&e<=32?"Moderate":e>32&&e<=48?"Unhealthy for sensitive Groups":e>48&&e<=64?"Unhealthy":e>64&&e<=80?"Very Unhealthy":e>80&&e<=100?"Hazardous":void 0},D={isConnected:s,bleDevice:i,data:j,errorMessage:f,setError:function(e){if(console.error(e),!e)throw new Error("Oups! Something bad happened.");y(e.message)},connect:function(e){d(e),r(!0)},disconnect:function(){r(!1),d(null)},readData:function(e){var a={measure:e,description:N(e),device:i.name,time:(new Date).toLocaleString("en-US",{timeZone:"UTC"})},c=Object(u.a)(j);c.length>=20&&c.pop(),O([a].concat(Object(u.a)(c)))}};return Object(m.jsx)(x.Provider,{value:D,children:a})},v=[],g=function(e){Object(h.a)(c,e);var a=Object(j.a)(c);function c(){var e;Object(d.a)(this,c);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=a.call.apply(a,[this].concat(n))).state={currentDevice:null},e.connectDevice=function(){navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["battery_service"]}).then((function(a){return console.log("device: ",a),a.addEventListener("gattserverdisconnected",e.onDisconnected),e.setState({currentDevice:a}),a.gatt.connect()})).then((function(a){return console.log("server: ",a),e.context.connect(e.state.currentDevice),a.getPrimaryService("battery_service")})).then((function(e){return console.log("service: ",e),e.getCharacteristic("battery_level")})).then((function(a){return console.log("characteristic: ",a),v.push(a.addEventListener("characteristicvaluechanged",e.handleMeasureChanged)),a.readValue()})).catch((function(a){e.context.setError(a)}))},e.disconnectDevice=function(){e.state.currentDevice.gatt.disconnect(),e.context.disconnect()},e.handleMeasureChanged=function(a){var c=a.target.value.getUint8(0);e.context.readData(c)},e.onDisconnected=function(a){var c=a.target;console.log("Device ".concat(c.name," is disconnected.")),e.context.disconnect()},e}return Object(b.a)(c,[{key:"componentWillUnmount",value:function(){this.disconnectDevice(),v.forEach((function(e){return e.remove()}))}},{key:"render",value:function(){var e=this.context.isConnected?"Disconnect Aether":"Connect Aether",a=this.context.isConnected?this.disconnectDevice:this.connectDevice;return Object(m.jsx)("div",{className:"connectBtn",children:Object(m.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:a,children:e})})}}]),c}(n.a.Component);g.contextType=x;var f=function(){return Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsxs)(l.b,{className:"navbar-brand",to:"/",children:[Object(m.jsx)("img",{src:i,width:"30",height:"30",className:"d-inline-block align-top",alt:"",style:{marginLeft:"16px",marginRight:"16px"}}),"Aether"]}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarScroll","aria-controls":"navbarScroll","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarScroll",children:[Object(m.jsx)("ul",{className:"navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll",children:Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{className:"nav-link active","aria-current":"page",to:"/history",children:"History"})})}),Object(m.jsx)("form",{className:"d-flex",children:Object(m.jsx)(g,{})})]})]})})},y=function(){var e=Object(t.useContext)(x),a=function(){return Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})};return Object(m.jsx)("div",{className:"container",children:e.errorMessage.length?Object(m.jsxs)("div",{className:"alert alert-danger alert-dismissible",role:"alert",children:[e.errorMessage,a()]}):e.isConnected?Object(m.jsxs)("div",{className:"alert alert-success alert-dismissible",role:"alert",children:["Aether is succesfuly connected!",a()]}):Object(m.jsxs)("div",{className:"alert alert-warning alert-dismissible",role:"alert",children:["Aether is not connected. Please connect with Aether!",a()]})})},N=function(){var e=Object(t.useContext)(x);return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("table",{class:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:"#"}),Object(m.jsx)("th",{scope:"col",children:"Measure"}),Object(m.jsx)("th",{scope:"col",children:"Description"}),Object(m.jsx)("th",{scope:"col",children:"Device"}),Object(m.jsx)("th",{scope:"col",children:"Time"})]})}),Object(m.jsx)("tbody",{children:e.data.map((function(e,a){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"row",children:a+1}),Object(m.jsxs)("td",{children:[e.measure,"%"]}),Object(m.jsx)("td",{children:e.description}),Object(m.jsx)("td",{children:e.device}),Object(m.jsx)("td",{children:e.time})]},a)}))})]})})},D=c(24),w=c.n(D);var C=function(){return Object(m.jsxs)("div",{className:"accordion",id:"accordionAirQuality",children:[Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingGreen",children:Object(m.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseGreen","aria-expanded":"true","aria-controls":"collapseGreen",children:"Green - Good"})}),Object(m.jsx)("div",{id:"collapseGreen",className:"accordion-collapse collapse show","aria-labelledby":"headingGreen","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Air quality is satisfactory, and air pollution poses little or no risk."})})]}),Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingYellow",children:Object(m.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseYellow","aria-expanded":"false","aria-controls":"collapseYellow",children:"Yellow - Moderate"})}),Object(m.jsx)("div",{id:"collapseYellow",className:"accordion-collapse collapse","aria-labelledby":"headingYellow","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Air quality is acceptable. However, there may be a risk for some people, particularly those who are unusually sensitive to air pollution."})})]}),Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingOrange",children:Object(m.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOrange","aria-expanded":"false","aria-controls":"collapseOrange",children:"Orange - Unhealthy for Sensitive Groups"})}),Object(m.jsx)("div",{id:"collapseOrange",className:"accordion-collapse collapse","aria-labelledby":"headingOrange","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Members of sensitive groups may experience health effects. The general public is less likely to be affected."})})]}),Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingRed",children:Object(m.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseRed","aria-expanded":"false","aria-controls":"collapseRed",children:"Red - Unhealthy"})}),Object(m.jsx)("div",{id:"collapseRed",className:"accordion-collapse collapse","aria-labelledby":"headingRed","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Some members of the general public may experience health effects; members of sensitive groups may experience more serious health effects."})})]}),Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingPurple",children:Object(m.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsePurple","aria-expanded":"false","aria-controls":"collapsePurple",children:"Purple - Very Unhealthy"})}),Object(m.jsx)("div",{id:"collapsePurple",className:"accordion-collapse collapse","aria-labelledby":"headingPurple","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Health alert: The risk of health effects is increased for everyone."})})]}),Object(m.jsxs)("div",{className:"accordion-item",children:[Object(m.jsx)("h2",{className:"accordion-header",id:"headingMaroon",children:Object(m.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseMaroon","aria-expanded":"false","aria-controls":"collapseMaroon",children:"Maroon - Hazardous"})}),Object(m.jsx)("div",{id:"collapseMaroon",className:"accordion-collapse collapse","aria-labelledby":"headingMaroon","data-bs-parent":"#accordionAirQuality",children:Object(m.jsx)("div",{className:"accordion-body",children:"Health warning of emergency conditions: everyone is more likely to be affected."})})]})]})};var M=function(){var e=Object(t.useContext)(x);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-8 col-md-12 col-sm-12 chart-container mt-4",children:Object(m.jsx)(w.a,{id:"gauge-chart6",animate:!0,nrOfLevels:6,percent:e.data.length?e.data[0].measure/100:0,needleColor:"#345243",colors:["green","yellow","orange","red","purple","maroon"]})}),Object(m.jsx)("div",{className:"col-lg-4 col-md-12 col-sm-12 mt-4",children:Object(m.jsx)(C,{})})]})}),Object(m.jsx)("footer",{children:Object(m.jsxs)("div",{className:"text-center py-3",children:[Object(m.jsx)("a",{href:"https://github.com/scalablecory/aether",children:"Aether on Github"})," ","is licensed under the",Object(m.jsx)("a",{href:"https://opensource.org/licenses/MIT",children:" MIT license"})]})})]})};var A=function(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(f,{}),Object(m.jsx)(y,{}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/history",children:Object(m.jsx)(N,{})}),Object(m.jsx)(o.a,{path:"/",children:Object(m.jsx)(M,{})})]})]})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((function(a){var c=a.getCLS,t=a.getFID,n=a.getFCP,s=a.getLCP,r=a.getTTFB;c(e),t(e),n(e),s(e),r(e)}))};r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(O,{children:Object(m.jsx)(A,{})})}),document.getElementById("root")),S()}},[[43,1,2]]]);
//# sourceMappingURL=main.d1395d3e.chunk.js.map